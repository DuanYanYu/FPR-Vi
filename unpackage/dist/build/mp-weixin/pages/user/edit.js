(global["webpackJsonp"]=global["webpackJsonp"]||[]).push([["pages/user/edit"],{"6db6":function(e,t,r){},"7d9f":function(e,t,r){"use strict";r.r(t);var a=r("e758"),n=r.n(a);for(var o in a)"default"!==o&&function(e){r.d(t,e,(function(){return a[e]}))}(o);t["default"]=n.a},"98b3":function(e,t,r){"use strict";r.r(t);var a=r("d126"),n=r("7d9f");for(var o in n)"default"!==o&&function(e){r.d(t,e,(function(){return n[e]}))}(o);r("d040");var u,i=r("f0c5"),c=Object(i["a"])(n["default"],a["b"],a["c"],!1,null,null,null,!1,a["a"],u);t["default"]=c.exports},d040:function(e,t,r){"use strict";var a=r("6db6"),n=r.n(a);n.a},d126:function(e,t,r){"use strict";r.d(t,"b",(function(){return n})),r.d(t,"c",(function(){return o})),r.d(t,"a",(function(){return a}));var a={uButton:function(){return r.e("uview-ui/components/u-button/u-button").then(r.bind(null,"c809"))},uForm:function(){return r.e("uview-ui/components/u-form/u-form").then(r.bind(null,"e06d"))},uFormItem:function(){return Promise.all([r.e("common/vendor"),r.e("uview-ui/components/u-form-item/u-form-item")]).then(r.bind(null,"29cb"))},uInput:function(){return Promise.all([r.e("common/vendor"),r.e("uview-ui/components/u-input/u-input")]).then(r.bind(null,"134c"))},uRadioGroup:function(){return Promise.all([r.e("common/vendor"),r.e("uview-ui/components/u-radio-group/u-radio-group")]).then(r.bind(null,"323d"))},uRadio:function(){return r.e("uview-ui/components/u-radio/u-radio").then(r.bind(null,"f811"))},uToast:function(){return r.e("uview-ui/components/u-toast/u-toast").then(r.bind(null,"b40a"))}},n=function(){var e=this,t=e.$createElement,r=(e._self._c,e.__get_style([e.inputStyle]));e.$mp.data=Object.assign({},{$root:{s0:r}})},o=[]},e113:function(e,t,r){"use strict";(function(e){r("1b22");a(r("66fd"));var t=a(r("98b3"));function a(e){return e&&e.__esModule?e:{default:e}}e(t.default)}).call(this,r("543d")["createPage"])},e758:function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0}),t.default=void 0;var a=r("2f62");function n(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,a)}return r}function o(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?n(Object(r),!0).forEach((function(t){u(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):n(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function u(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var i={data:function(){return{formData:{id:0,username:"",age:0,sex:"",tel:"",email:"",avatar:""},radioList:[{name:"男",disabled:!1},{name:"女",disabled:!1}]}},onLoad:function(){var t=this,r=this.userInfo.id;this.formData.id=r,0!=r&&r?e.request({url:"http://ocr.server.truedei.com/ocr/user/getUserById",method:"GET",data:{id:r},success:function(e){var r=e.data.result;void 0!=r.accountNumber&&(t.formData.username=r.accountNumber),void 0!=r.gender&&(1==r.gender?t.formData.sex="男":t.formData.sex="女"),void 0!=r.avatarUrl&&(t.formData.avatar=r.avatarUrl),void 0!=r.age&&(t.formData.age=r.age),void 0!=r.tel&&(t.formData.tel=r.tel),void 0!=r.email&&(t.formData.email=r.email)},fail:function(e){reject(e)}}):e.reLaunch({url:"/pages/user/index"})},computed:o(o({},(0,a.mapState)(["hasLogin","userInfo"])),{},{toUser:function(t){this.login(t),e.reLaunch({url:"/pages/user/index"})},inputStyle:function(){var e={};return this.formData.username&&this.formData.tel&&(e.color="#fff",e.backgroundColor=this.$u.color["warning"]),e}}),created:function(){var t=this;e.$on("uAvatarCropper",(function(r){t.avatar=r;var a=t.formData.id;console.log(a),e.request({url:"http://ocr.server.truedei.com/upload/uploadAvatarUrl",method:"POST",data:{oneImg:t.avatar},success:function(e){t.formData.avatar=e.data.result.imgUrl,t.editInfo()},fail:function(e){reject(e)}})}))},methods:o(o({},(0,a.mapMutations)(["login"])),{},{chooseAvatar:function(){this.$u.route({url:"/uview-ui/components/u-avatar-cropper/u-avatar-cropper",params:{destWidth:300,rectWidth:200,fileType:"jpg"}})},changeName:function(){this.$refs.uToast.show({title:"用户名不可修改",type:"error",duration:1e3})},editInfo:function(){var t=this,r=this.userInfo.id;e.request({url:"http://ocr.server.truedei.com/ocr/user/updateUserById",method:"PUT",data:{id:r,gender:"男"==this.formData.sex?1:2,avatarUrl:this.formData.avatar,name:this.formData.username,tel:this.formData.tel,accountNumber:this.formData.username,age:this.formData.age,email:this.formData.email},success:function(e){if("修改成功"==e.data.message){var a={name:t.formData.username,phone:t.formData.tel,id:r,avatarUrl:t.formData.avatar};t.login(a),t.$refs.uToast.show({title:"信息修改成功",type:"success",duration:1e3})}},fail:function(e){reject(e)}})},urlToBase64:function(t){return new Promise((function(r,a){e.request({url:t,method:"GET",responseType:"arraybuffer",success:function(e){var t=wx.arrayBufferToBase64(e.data);t="data:image/jpeg;base64,"+t,r(t)},fail:function(e){a(e)}})}))}})};t.default=i}).call(this,r("543d")["default"])}},[["e113","common/runtime","common/vendor"]]]);